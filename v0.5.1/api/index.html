<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ValueShapes</title><link rel="canonical" href="https://oschulz.github.io/ValueShapes.jl/stable/api/index.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>ValueShapes</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>API</a><ul class="internal"><li><a class="toctext" href="#Types-1">Types</a></li><li><a class="toctext" href="#Functions-1">Functions</a></li><li class="toplevel"><a class="toctext" href="#Documentation-1">Documentation</a></li></ul></li><li><a class="toctext" href="../LICENSE/">LICENSE</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>API</a></li></ul><a class="edit-page" href="https://github.com/oschulz/ValueShapes.jl/blob/master/docs/src/api.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-1" href="#API-1">API</a></h1><h2><a class="nav-anchor" id="Types-1" href="#Types-1">Types</a></h2><ul><li><a href="#ValueShapes.AbstractScalarShape"><code>ValueShapes.AbstractScalarShape</code></a></li><li><a href="#ValueShapes.AbstractValueShape"><code>ValueShapes.AbstractValueShape</code></a></li><li><a href="#ValueShapes.ArrayShape"><code>ValueShapes.ArrayShape</code></a></li><li><a href="#ValueShapes.ConstValueShape"><code>ValueShapes.ConstValueShape</code></a></li><li><a href="#ValueShapes.NamedTupleShape"><code>ValueShapes.NamedTupleShape</code></a></li><li><a href="#ValueShapes.ScalarShape"><code>ValueShapes.ScalarShape</code></a></li><li><a href="#ValueShapes.ValueAccessor"><code>ValueShapes.ValueAccessor</code></a></li></ul><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><ul><li><a href="#ValueShapes.default_datatype"><code>ValueShapes.default_datatype</code></a></li><li><a href="#ValueShapes.totalndof"><code>ValueShapes.totalndof</code></a></li><li><a href="#ValueShapes.valshape"><code>ValueShapes.valshape</code></a></li></ul><h1><a class="nav-anchor" id="Documentation-1" href="#Documentation-1">Documentation</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.AbstractScalarShape" href="#ValueShapes.AbstractScalarShape"><code>ValueShapes.AbstractScalarShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">AbstractScalarShape{T} &lt;: AbstractValueShape</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/scalar_shape.jl#L4-L6">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.AbstractValueShape" href="#ValueShapes.AbstractValueShape"><code>ValueShapes.AbstractValueShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">abstract type AbstractValueShape</code></pre><p>An <code>AbstractValueShape</code> combines type and size information.</p><p>Subtypes are defined for shapes of scalars (see <a href="#ValueShapes.ScalarShape"><code>ScalarShape</code></a>), arrays (see <a href="#ValueShapes.ArrayShape"><code>ArrayShape</code></a>), constant values (see <a href="#ValueShapes.ConstValueShape"><code>ConstValueShape</code></a>) and <code>NamedTuple</code>s (see <a href="#ValueShapes.NamedTupleShape"><code>NamedTupleShape</code></a>).</p><p>Subtypes of <code>AbstractValueShape</code> must support <code>eltype</code>, <code>size</code> and <a href="#ValueShapes.totalndof"><code>totalndof</code></a>.</p><p>Value shapes can be used as constructors to generate values of the given shape with undefined content. If the element type of the shape is an abstract or union type, a suitable concrete type will be chosen automatically, if possible (see <a href="#ValueShapes.default_datatype"><code>ValueShapes.default_datatype</code></a>):</p><pre><code class="language-julia">shape = ArrayShape{Real}(2,3)
A = shape(undef)
typeof(A) == Array{Float64,2}
size(A) == (2, 3)
valshape(A) == ArrayShape{Float64}(2,3)</code></pre><p>Use</p><pre><code class="language-none">(shape::AbstractValueShape)(data::AbstractVector{&lt;:Real})::eltype(shape)</code></pre><p>to view a flat vector of anonymous real values as a value of the given shape:</p><pre><code class="language-julia">data = [1, 2, 3, 4, 5, 6]
shape(data) == [1 3 5; 2 4 6]</code></pre><p>In return,</p><pre><code class="language-none">Base.Vector{T}(undef, shape::AbstractValueShape)
Base.Vector(undef, shape::AbstractValueShape)</code></pre><p>will create a suitable uninitialized vector of the right length to hold such flat data for the given shape. If no type <code>T</code> is given, a suitable data type will be chosen automatically.</p><p>When dealing with multiple vectors of flattened data, use</p><pre><code class="language-none">shape.(data::ArrayOfArrays.AbstractVectorOfSimilarVectors)</code></pre><p>ValueShapes supports this via specialized broadcasting.</p><p>In return,</p><pre><code class="language-none">ArraysOfArrays.VectorOfSimilarVectors{T}(shape::AbstractValueShape)
ArraysOfArrays.VectorOfSimilarVectors(shape::AbstractValueShape)</code></pre><p>will create a suitable vector (of length zero) of vectors that can hold flattened data for the given shape. The result will be a <code>VectorOfSimilarVectors</code> wrapped around a 2-dimensional <code>ElasticArray</code>. This way, all data is stored in a single contiguous chunk of memory.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/value_shape.jl#L24-L86">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.ArrayShape" href="#ValueShapes.ArrayShape"><code>ValueShapes.ArrayShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">ArrayShape{T,N} &lt;: AbstractValueShape</code></pre><p>Describes the shape of <code>N</code>-dimensional arrays of type <code>T</code> and a given size.</p><p>Constructor:</p><pre><code class="language-none">ArrayShape{T}(dims::NTuple{N,Integer}) where {T,N}
ArrayShape{T}(dims::Integer...) where {T}</code></pre><p>e.g.</p><pre><code class="language-none">shape = ArrayShape{Real}(2, 3)</code></pre><p>In addition to using the shape as a value constructor</p><pre><code class="language-none">size(shape(undef)) == (2, 3)
eltype(shape(undef)) == Float64</code></pre><p>(see <a href="#ValueShapes.AbstractValueShape"><code>AbstractValueShape</code></a>), a shape can also be used as an argument of certains array type constructors to explicitly construct standard <code>Array</code>s or <code>ElasticArray</code>s:</p><pre><code class="language-none">using ElasticArrays

size(Array(undef, shape)) == (2, 3)
eltype(Array(undef, shape)) == Float64

size(ElasticArray(undef, shape)) == (2, 3)</code></pre><p>See also the documentation of <a href="#ValueShapes.AbstractValueShape"><code>AbstractValueShape</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/array_shape.jl#L4-L35">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.ConstValueShape" href="#ValueShapes.ConstValueShape"><code>ValueShapes.ConstValueShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">ConstValueShape{T} &lt;: AbstractValueShape</code></pre><p>A <code>ConstValueShape</code> describes the shape of constant values of type <code>T</code>.</p><p>Constructor:</p><pre><code class="language-none">ConstValueShape(value)</code></pre><p><code>value</code> may be of arbitrary type, e.g. a constant scalar value or array:</p><pre><code class="language-none">ConstValueShape(4.2)
ConstValueShape([11 21; 12 22])</code></pre><p>Shapes of constant values have zero degrees of freedom (see <a href="#ValueShapes.totalndof"><code>totalndof</code></a>).</p><p>See also the documentation of <a href="#ValueShapes.AbstractValueShape"><code>AbstractValueShape</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/const_value_shape.jl#L4-L22">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.NamedTupleShape" href="#ValueShapes.NamedTupleShape"><code>ValueShapes.NamedTupleShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">NamedTupleShape{names,...} &lt;: AbstractValueShape</code></pre><p>Defines the shape of a <code>NamedTuple</code> (resp.  set of variables, parameters, etc.).</p><p>Constructors:</p><pre><code class="language-none">NamedTupleShape(name1 = shape1::AbstractValueShape, ...)
NamedTupleShape(named_shapes::NamedTuple)</code></pre><p>e.g.</p><pre><code class="language-none">shape = NamedTupleShape(
    a = ArrayShape{Real}(2, 3),
    b = ScalarShape{Real}(),
    c = ArrayShape{Real}(4)
)</code></pre><p>Example:</p><pre><code class="language-julia">shape = NamedTupleShape(
    a = ScalarShape{Real}(),
    b = ArrayShape{Real}(2, 3),
    c = ConstValueShape(42)
)
data = VectorOfSimilarVectors{Float64}(shape)
resize!(data, 10)
rand!(flatview(data))
table = shape.(data)
fill!(table.a, 4.2)
all(x -&gt; x == 4.2, view(flatview(data), 1, :))</code></pre><p>See also the documentation of <a href="#ValueShapes.AbstractValueShape"><code>AbstractValueShape</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/named_tuple_shape.jl#L10-L46">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.ScalarShape" href="#ValueShapes.ScalarShape"><code>ValueShapes.ScalarShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">ScalarShape{T} &lt;: AbstractScalarShape{T}</code></pre><p>An <code>ScalarShape</code> describes the shape of scalar values of a given type.</p><p>Constructor:</p><pre><code class="language-none">ScalarShape{T::Type}()</code></pre><p>T may be an abstract type of Union, or a specific type, e.g.</p><pre><code class="language-none">ScalarShape{Real}()
ScalarShape{Integer}()
ScalarShape{Float32}()
ScalarShape{Complex}()</code></pre><p>Scalar shapes may have a total number of degrees of freedom (see <a href="#ValueShapes.totalndof"><code>totalndof</code></a>) greater than one, e.g. shapes of complex-valued scalars:</p><pre><code class="language-none">totalndof(ScalarShape{Real}()) == 1
totalndof(ScalarShape{Complex}()) == 2</code></pre><p>See also the documentation of <a href="#ValueShapes.AbstractValueShape"><code>AbstractValueShape</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/scalar_shape.jl#L19-L43">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.ValueAccessor" href="#ValueShapes.ValueAccessor"><code>ValueShapes.ValueAccessor</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">ValueAccessor{S&lt;:AbstractValueShape}</code></pre><p>A value accessor provides a means to access a value with a given shape stored in a flat real-valued data vector with a given offset position.</p><p>Constructor:</p><pre><code class="language-none">ValueAccessor{S}(shape::S, offset::Int)</code></pre><p>The offset is relative to the first index of a flat data array, so if the value is stored at the beginning of the array, the offset will be zero.</p><p>An <code>ValueAccessor</code> can be used to index into a given flat data array.</p><p>Example:</p><pre><code class="language-julia">acc = ValueAccessor(ArrayShape{Real}(2,3), 2)
valshape(acc) == ArrayShape{Real,2}((2, 3))
data = [1, 2, 3, 4, 5, 6, 7, 8, 9]
data[acc] == [3 5 7; 4 6 8]</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/value_accessor.jl#L4-L27">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.totalndof" href="#ValueShapes.totalndof"><code>ValueShapes.totalndof</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">totalndof(shape::AbstractValueShape)</code></pre><p>Get the total number of degrees of freedom of values of the given shape.</p><p>Equivalent to the length of a vector that would result from flattening the data into a sequence of real numbers, excluding any constant values.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/value_shape.jl#L113-L120">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.valshape" href="#ValueShapes.valshape"><code>ValueShapes.valshape</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">valshape(x)::AbstractValueShape
valshape(acc::ValueAccessor)::AbstractValueShape
valshape(d::Distributions.Distribution)::AbstractValueShape</code></pre><p>Get the value shape of an arbitrary value, resp. the shape a <code>ValueAccessor</code> is based on, or the shape of the variates for a <code>Distribution</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/value_shape.jl#L99-L106">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ValueShapes.default_datatype" href="#ValueShapes.default_datatype"><code>ValueShapes.default_datatype</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">ValueShapes.default_datatype(T::Type)</code></pre><p>Return a default specific type U that is more specific than T, with U &lt;: T.</p><p>e.g.</p><pre><code class="language-none">ValueShapes.default_datatype(Real) == Float64
ValueShapes.default_datatype(Complex) == Complex{Float64}</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ValueShapes.jl/blob/7b2001b1299f5801b56878bfa432aa4b37d6d16b/src/value_shape.jl#L4-L13">source</a></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../LICENSE/"><span class="direction">Next</span><span class="title">LICENSE</span></a></footer></article></body></html>

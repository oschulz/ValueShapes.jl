<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ShapesOfVariables</title><link rel="canonical" href="https://oschulz.github.io/ShapesOfVariables.jl/stable/api/index.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>ShapesOfVariables</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>API</a><ul class="internal"><li><a class="toctext" href="#Types-1">Types</a></li><li><a class="toctext" href="#Functions-1">Functions</a></li><li class="toplevel"><a class="toctext" href="#Documentation-1">Documentation</a></li></ul></li><li><a class="toctext" href="../LICENSE/">LICENSE</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>API</a></li></ul><a class="edit-page" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/master/docs/src/api.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-1" href="#API-1">API</a></h1><h2><a class="nav-anchor" id="Types-1" href="#Types-1">Types</a></h2><ul><li><a href="#ShapesOfVariables.AbstractValueShape"><code>ShapesOfVariables.AbstractValueShape</code></a></li><li><a href="#ShapesOfVariables.ArrayShape"><code>ShapesOfVariables.ArrayShape</code></a></li><li><a href="#ShapesOfVariables.ConstValueShape"><code>ShapesOfVariables.ConstValueShape</code></a></li><li><a href="#ShapesOfVariables.ScalarShape"><code>ShapesOfVariables.ScalarShape</code></a></li><li><a href="#ShapesOfVariables.VarShapes"><code>ShapesOfVariables.VarShapes</code></a></li></ul><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><ul><li><a href="#ShapesOfVariables.default_datatype"><code>ShapesOfVariables.default_datatype</code></a></li><li><a href="#ShapesOfVariables.totalndof"><code>ShapesOfVariables.totalndof</code></a></li></ul><h1><a class="nav-anchor" id="Documentation-1" href="#Documentation-1">Documentation</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.AbstractValueShape" href="#ShapesOfVariables.AbstractValueShape"><code>ShapesOfVariables.AbstractValueShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">abstract type AbstractValueShape</code></pre><p>An <code>AbstractValueShape</code> combines type and size information, the combination of which is termed shape, here. Subtypes are defined for shapes of scalars (see <a href="#ShapesOfVariables.ScalarShape"><code>ScalarShape</code></a>), arrays (see <a href="#ShapesOfVariables.ArrayShape"><code>ArrayShape</code></a>) and constant values (see <a href="#ShapesOfVariables.ConstValueShape"><code>ConstValueShape</code></a>).</p><p>Subtype of <code>AbstractValueShape</code> must support <code>eltype</code>, <code>size</code> and <a href="#ShapesOfVariables.totalndof"><code>totalndof</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L24-L34">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.ArrayShape" href="#ShapesOfVariables.ArrayShape"><code>ShapesOfVariables.ArrayShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">ArrayShape{T,N} &lt;: AbstractValueShape</code></pre><p>Describes the shape of <code>N</code>-dimensional arrays of type <code>T</code> and a given size.</p><p>Constructor:</p><pre><code class="language-none">ArrayShape{T}(dims::NTuple{N,Integer}) where {T,N}
ArrayShape{T}(dims::Integer...) where {T}</code></pre><p>e.g.</p><pre><code class="language-none">shape = ArrayShape{Real}(2, 3)</code></pre><p>Array shapes can be used to instantiate array of the given shape, e.g.</p><pre><code class="language-none">size(Array(undef, shape)) == (2, 3)
size(ElasticArrays.ElasticArray(undef, shape)) == (2, 3)</code></pre><p>If the element type of the shape of an abstract type of union, <a href="#ShapesOfVariables.default_datatype"><code>ShapesOfVariables.default_datatype</code></a> will be used to determine a suitable more specific type, if possible:</p><pre><code class="language-none">eltype(Array(undef, shape)) == Float64</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L128-L152">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.ConstValueShape" href="#ShapesOfVariables.ConstValueShape"><code>ShapesOfVariables.ConstValueShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">ConstValueShape{T} &lt;: AbstractValueShape</code></pre><p>A <code>ConstValueShape</code> describes the shape of constant values of type <code>T</code>.</p><p>Constructor:</p><pre><code class="language-none">ConstValueShape(value)</code></pre><p><code>value</code> may be of arbitrary type, e.g. a constant scalar value or array:</p><pre><code class="language-none">ConstValueShape(4.2),
ConstValueShape([11 21; 12 22]),</code></pre><p>Shapes of constant values have zero degrees of freedom ((see <a href="#ShapesOfVariables.totalndof"><code>totalndof</code></a>).</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L190-L206">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.ScalarShape" href="#ShapesOfVariables.ScalarShape"><code>ShapesOfVariables.ScalarShape</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">ScalarShape{T} &lt;: AbstractValueShape</code></pre><p>An <code>ScalarShape</code> describes the shape of scalar values of a given type.</p><p>Constructor:</p><pre><code class="language-none">ScalarShape{T::Type}()</code></pre><p>T may be an abstract type of Union, or a specific type, e.g.</p><pre><code class="language-none">ScalarShape{Integer}()
ScalarShape{Real}()
ScalarShape{Complex}()
ScalarShape{Float32}()</code></pre><p>Scalar shapes may have a total number of degrees of freedom (see <a href="#ShapesOfVariables.totalndof"><code>totalndof</code></a>) greater than one, e.g. shapes of complex-valued scalars:</p><pre><code class="language-none">totalndof(ScalarShape{Real}()) == 1
totalndof(ScalarShape{Complex}()) == 2</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L77-L99">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.VarShapes" href="#ShapesOfVariables.VarShapes"><code>ShapesOfVariables.VarShapes</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">VarShapes{N,AC}</code></pre><p>Defines the shapes of an ordered set of variables (resp. parameters, arguments, etc.). This forms the basis of viewing the content of all variables in a dual way as a <code>NamedTuple</code> and as a flattened vectors.</p><p>Scalar values have shape <code>()</code>, array values have shape <code>(dim1, dim2, ...)</code>.</p><p>Constructors:</p><pre><code class="language-none">VarShapes(name1 = shape1, ...)
VarShapes(varshapes::NamedTuple)</code></pre><p>e.g.</p><pre><code class="language-none">varshapes = VarShapes(
    a = ArrayShape{Real}(2, 3),
    b = ScalarShape{Real}(),
    c = ArrayShape{Real}(4)
)</code></pre><p>Use</p><pre><code class="language-none">(varshapes::VarShapes)(data::AbstractVector)::NamedTuple</code></pre><p>to get correctly named and shaped views into a vector containing the flattened values of all variables. In return,</p><pre><code class="language-none">Base.Vector{T}(::UndefInitializer, varshapes::VarShapes)
Base.Vector(::UndefInitializer, varshapes::VarShapes)</code></pre><p>will create a suitable uninitialized vector to hold such flattened data for a given set of variables. If no type <code>T</code> is given, a suitable non-abstract type will be chosen automatically via <code>nonabstract_eltype(varshapes)</code>.</p><p>When dealing with multiple vectors of flattened data,</p><pre><code class="language-none">(varshapes::VarShapes)(
    data::ArrayOfArrays.AbstractVectorOfSimilarVectors
)::NamedTuple</code></pre><p>creates a view of a vector of flattened data vectors as a table with the variable names as column names and the (possibly array-shaped) variable value views as entries. In return,</p><pre><code class="language-none">ArraysOfArrays.VectorOfSimilarVectors{T}(varshapes::VarShapes)
ArraysOfArrays.VectorOfSimilarVectors(varshapes::VarShapes)</code></pre><p>will create a suitable vector (of length zero) of vectors to hold flattened value data. The result will be a <code>VectorOfSimilarVectors</code> wrapped around a 2-dimensional <code>ElasticArray</code>. Internally all data is stored in a single flat <code>Vector{T}</code>.</p><p>Example:</p><pre><code class="language-julia">varshapes = VarShapes(
    a = ScalarShape{Real}(),
    b = ArrayShape{Real}(2, 3),
    c = ConstValueShape(42)
)
data = VectorOfSimilarVectors{Float64}(varshapes)
resize!(data, 10)
rand!(flatview(data))
table = TypedTables.Table(varshapes(data))
fill!(table.a, 4.2)
all(x -&gt; x == 4.2, view(flatview(data), 1, :))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/varshapes.jl#L73-L142">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.totalndof" href="#ShapesOfVariables.totalndof"><code>ShapesOfVariables.totalndof</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">totalndof(shape::AbstractValueShape)</code></pre><p>Get the total number of degrees of freedom of values having the given shape.</p><p>Equivalent to the size of the array required when flattening values of this shape into an array of real numbers, without including any constant values.</p></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L61-L68">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ShapesOfVariables.default_datatype" href="#ShapesOfVariables.default_datatype"><code>ShapesOfVariables.default_datatype</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">ShapesOfVariables.default_datatype(T::Type)</code></pre><p>Return a default specific type U that is more specific than T, with U &lt;: T.</p><p>e.g.</p><pre><code class="language-none">ShapesOfVariables.default_datatype(Real) == Float64
ShapesOfVariables.default_datatype(Complex) == Complex{Float64}</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/oschulz/ShapesOfVariables.jl/blob/8f99774db114d570748ca4a54e71f1441d73fdad/src/valueshape.jl#L4-L13">source</a></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../LICENSE/"><span class="direction">Next</span><span class="title">LICENSE</span></a></footer></article></body></html>
